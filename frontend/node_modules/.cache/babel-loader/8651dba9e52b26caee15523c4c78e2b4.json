{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Danusshkumar\\\\Desktop\\\\TAC\\\\Apartment-Management-System\\\\frontend\\\\src\\\\components\\\\Housekeeping.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Button from 'react-bootstrap/Button';\nimport { HousekeepingCard } from './Cards.js';\nimport './show.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Housekeeping extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleCancelRequest = () => {\n      axios.post('http://localhost:8082/housekeeping/request/cancel', {\n        servantId: this.state.id\n      }).then(res => {\n        console.log(\"\");\n\n        if (res.data.status === 'success') {\n          this.setState({\n            requestPerson: 'no'\n          }); // Update the state to reflect the cancellation\n\n          alert('Request successfully cancelled');\n        } else {\n          alert('Failed to cancel request');\n        }\n      }).catch(err => {\n        console.log('Error cancelling request:', err);\n      });\n    };\n\n    let user = JSON.parse(localStorage.getItem('user'));\n    this.state = {\n      servants: [],\n      role: user.user.role,\n      id: user.user.userid,\n      requestPerson: ''\n    };\n  }\n\n  componentDidMount() {\n    axios({\n      method: 'post',\n      url: 'http://localhost:8082/dashboard/housekeeping',\n      data: {\n        role: this.state.role,\n        id: this.state.id\n      }\n    }).then(res => {\n      this.setState({\n        servants: res.data\n      });\n    }).catch(err => {\n      console.log('Error from Housekeeping.js:', err);\n    }); // Retrieve request person information if the user is housekeeping\n\n    if (this.state.role === 'housekeeping') {\n      axios({\n        method: 'post',\n        url: 'http://localhost:8082/housekeeping/request/getRequest',\n        data: {\n          id: this.state.id\n        }\n      }).then(res => {\n        if (res.data.status === 'success') {\n          this.setState({\n            requestPerson: res.data.request\n          });\n        } else {\n          console.log(\"Failed to fetch\");\n        }\n      }).catch(err => {\n        console.log('Error fetching request person:', err);\n      });\n    }\n  }\n\n  render() {\n    const servants = this.state.servants;\n    const role = this.state.role;\n    const id = this.state.id;\n    const requestPerson = this.state.requestPerson;\n    let servList;\n\n    if (servants.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"textz\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Sorry, all staffs are occupied!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this);\n    } else {\n      servList = servants.map((serv, k) => /*#__PURE__*/_jsxDEV(HousekeepingCard, {\n        servants: serv,\n        role: role,\n        id: id\n      }, k, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this));\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"label label-danger\",\n      style: {\n        margin: 'auto',\n        marginTop: '100px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-12\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"display-4 text-center\",\n              children: \"Availability Ledger\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"list\",\n          style: {\n            margin: 'auto'\n          },\n          children: servList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), role === 'housekeeping' && requestPerson !== \"no\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"request-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"cross-mark\",\n            onClick: this.handleCancelRequest,\n            children: \"\\u2716\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"request-title\",\n            children: \"Request\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"request-person\",\n            children: requestPerson\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass RequestHousekeeping extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {\n        sid: this.props.match.params.sid,\n        uid: this.props.id\n      }\n    };\n  }\n\n  submitHandler(event) {\n    event.preventDefault();\n    axios({\n      method: 'post',\n      url: 'housekeeping/request/confirm',\n      baseURL: 'http://localhost:8082/',\n      data: {\n        servant: this.state.data\n      }\n    });\n    alert('Successfully requested');\n    this.render();\n    console.log(\"submitted\");\n  }\n\n  render() {\n    const backbtn = () => {\n      window.location.replace('/dashboard/housekeeping');\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"center\", {\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"The Housekeeping staff will be at your doorsteps soon...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          float: 'left',\n          fontSize: '18px',\n          marginLeft: '10%'\n        },\n        variant: \"warning\",\n        onClick: backbtn,\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"\\u2190 Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 111\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.submitHandler.bind(this),\n          variant: \"primary\",\n          children: \"Confirm Request\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 105\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"image1\",\n          src: \"https://media.istockphoto.com/vectors/cleaning-service-staff-smiling-cartoon-characters-isolated-on-white-vector-id958689426?k=6&m=958689426&s=612x612&w=0&h=KW24AVt3IX-yDa3LflcocU82Hn814BMU5W3AcbUV8us=\",\n          height: \"500px\",\n          width: \"500px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport { Housekeeping, RequestHousekeeping };","map":{"version":3,"sources":["C:/Users/Danusshkumar/Desktop/TAC/Apartment-Management-System/frontend/src/components/Housekeeping.js"],"names":["React","Component","axios","Button","HousekeepingCard","Housekeeping","constructor","props","handleCancelRequest","post","servantId","state","id","then","res","console","log","data","status","setState","requestPerson","alert","catch","err","user","JSON","parse","localStorage","getItem","servants","role","userid","componentDidMount","method","url","request","render","servList","length","map","serv","k","margin","marginTop","RequestHousekeeping","sid","match","params","uid","submitHandler","event","preventDefault","baseURL","servant","backbtn","window","location","replace","float","fontSize","marginLeft","bind"],"mappings":"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","sourcesContent":["import React,{Component} from 'react'\r\nimport axios from 'axios';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {HousekeepingCard} from './Cards.js'\r\nimport './show.css';\r\n\r\n\r\nclass Housekeeping extends Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    let user = JSON.parse(localStorage.getItem('user'));\r\n    this.state = {\r\n      servants: [],\r\n      role: user.user.role,\r\n      id: user.user.userid,\r\n      requestPerson: '',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios({\r\n      method: 'post',\r\n      url: 'http://localhost:8082/dashboard/housekeeping',\r\n      data: {\r\n        role: this.state.role,\r\n        id: this.state.id,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        this.setState({ servants: res.data });\r\n      })\r\n      .catch((err) => {\r\n        console.log('Error from Housekeeping.js:', err);\r\n      });\r\n  \r\n    // Retrieve request person information if the user is housekeeping\r\n    if (this.state.role === 'housekeeping') {\r\n      axios({\r\n        method: 'post',\r\n        url: 'http://localhost:8082/housekeeping/request/getRequest',\r\n        data: { id: this.state.id },\r\n      })\r\n        .then((res) => {\r\n          if (res.data.status === 'success') {\r\n            this.setState({ requestPerson: res.data.request });\r\n          }\r\n          else {\r\n            console.log(\"Failed to fetch\");\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log('Error fetching request person:', err);\r\n        });\r\n    }\r\n  }\r\n\r\n  handleCancelRequest = () => {\r\n    axios.post('http://localhost:8082/housekeeping/request/cancel', { servantId: this.state.id })\r\n      .then((res) => {\r\n        console.log(\"\");\r\n        if (res.data.status === 'success') {\r\n          this.setState({ requestPerson: 'no' }); // Update the state to reflect the cancellation\r\n          alert('Request successfully cancelled');\r\n        } else {\r\n          alert('Failed to cancel request');\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log('Error cancelling request:', err);\r\n      });\r\n  }\r\n  \r\n\r\n  render() {\r\n    const servants = this.state.servants;\r\n    const role = this.state.role;\r\n    const id = this.state.id;\r\n    const requestPerson = this.state.requestPerson;\r\n    let servList;\r\n\r\n    if (servants.length === 0) {\r\n      return (\r\n        <div className=\"textz\">\r\n          <h1>Sorry, all staffs are occupied!</h1>\r\n        </div>\r\n      );\r\n    } else {\r\n      servList = servants.map((serv, k) => (\r\n        <HousekeepingCard servants={serv} role={role} key={k} id={id} />\r\n      ));\r\n    }\r\n\r\n    return (\r\n      <div className=\"label label-danger\" style={{ margin: 'auto', marginTop: '100px' }}>\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <h2 className=\"display-4 text-center\">Availability Ledger</h2>\r\n            </div>\r\n          </div>\r\n          <div className=\"list\" style={{ margin: 'auto' }}>\r\n            {servList}\r\n          </div>\r\n\r\n          {role === 'housekeeping' && requestPerson !== \"no\" && (\r\n            <div className=\"request-container\">\r\n              <p className=\"cross-mark\" onClick={this.handleCancelRequest}>✖</p>\r\n              <h2 className=\"request-title\">Request</h2>\r\n              <p className=\"request-person\">{requestPerson}</p>\r\n            </div>\r\n\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass RequestHousekeeping extends Component{\r\n  constructor(props){\r\n    super(props);\r\n\r\n  this.state={\r\n    data:{\r\n\r\n      sid:this.props.match.params.sid,\r\n      uid:this.props.id\r\n\r\n    }\r\n  }\r\n\r\n  }\r\n  submitHandler(event){\r\n\r\n  event.preventDefault();\r\n\r\n\r\n    axios({\r\n      method: 'post',\r\n      url: 'housekeeping/request/confirm',\r\n      baseURL: 'http://localhost:8082/',\r\n      data:{\r\n        servant:this.state.data\r\n      }\r\n\r\n    })\r\n    alert('Successfully requested');\r\n    this.render();\r\n    console.log(\"submitted\");\r\n  }\r\n\r\n  render(){\r\n    const backbtn = ()=>{\r\n      window.location.replace('/dashboard/housekeeping')\r\n    }\r\n    return(\r\n      <div >\r\n      <center><h2>The Housekeeping staff will be at your doorsteps soon...</h2></center>\r\n      <br/>\r\n      <Button style={{ float:'left', fontSize:'18px',marginLeft : '10%'}} variant=\"warning\" onClick={backbtn}><b>&larr; Back</b></Button>\r\n      <br/><br/><br/>\r\n      <center><Button onClick={this.submitHandler.bind(this)} variant=\"primary\">Confirm Request</Button><br/>\r\n      <img alt='image1'src=\"https://media.istockphoto.com/vectors/cleaning-service-staff-smiling-cartoon-characters-isolated-on-white-vector-id958689426?k=6&m=958689426&s=612x612&w=0&h=KW24AVt3IX-yDa3LflcocU82Hn814BMU5W3AcbUV8us=\" height='500px' width='500px'/>\r\n      <br/><br/></center>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport { Housekeeping,RequestHousekeeping};"]},"metadata":{},"sourceType":"module"}