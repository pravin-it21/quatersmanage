{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Danusshkumar\\\\Desktop\\\\TAC\\\\Apartment-Management-System\\\\frontend\\\\src\\\\components\\\\Housekeeping.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Button from 'react-bootstrap/Button';\nimport { HousekeepingCard } from './Cards.js';\nimport Header from './Header';\nimport './show.css'; // class Housekeeping extends Component {\n//   constructor(props) {\n//     super(props);\n//     this.state = {\n//       servants: [],\n//       role:props.role,\n//       id:props.id\n//     };\n//   }\n// componentDidMount() {\n// axios({\n//   method: 'post',\n//   url: 'dashboard/housekeeping',\n//   baseURL: 'http://localhost:8082/',\n//   data:{\n//     role:this.props.role,\n//     id:this.props.id\n//   }\n// }).then(res => {\n//   this.setState({\n//     servants: res.data\n//   })\n//   })\n//   .catch(err =>{\n//   console.log('Error from Housekeeping.js');\n//   });\n// }\n// render() {\n//   const servants = this.state.servants;\n//   const role=this.state.role;\n//   const id=this.state.id;\n//   let servList;\n//   if(servants.length===0) {\n//     return(\n//     <div className=\"textz\">  <h1 >Sorry all staffs are occupied..!</h1></div>\n//     )\n//   } else {\n//     servList = servants.map((serv, k) =>\n//       <HousekeepingCard servants={serv} role={role} key={k} id={id} />\n//     );\n//   }\n//   if(servants==='undefined'){\n//     return(\n//       <h1>You have no one available now</h1>\n//     )\n//   }\n//   return (\n//     <div className=\"label label-danger\" style ={{margin: 'auto',marginTop : '100px'}}>\n//       <div className=\"container\">\n//         <div className=\"row\">\n//           <div className=\"col-md-12\">\n//             <h2 className=\"display-4 text-center\" >Availability Ledger</h2>\n//           </div>\n//         <div className=\"list \" style={{margin :\"auto\"}}>\n//               {servList}\n//         </div>\n//         <div>\n//         </div>\n//       </div>\n//     </div>\n//    </div>\n//   );\n// }\n// }\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Housekeeping extends Component {\n  constructor(props) {\n    super(props);\n    let user = JSON.parse(localStorage.getItem('user'));\n    console.log(user);\n    this.state = {\n      servants: [],\n      role: user.user.role,\n      id: user.user.userid,\n      requestPerson: ''\n    };\n  }\n\n  componentDidMount() {\n    axios({\n      method: 'post',\n      url: 'http://localhost:8082/dashboard/housekeeping',\n      data: {\n        role: this.state.role,\n        id: this.state.id\n      }\n    }).then(res => {\n      this.setState({\n        servants: res.data\n      });\n    }).catch(err => {\n      console.log('Error from Housekeeping.js:', err);\n    }); // Retrieve request person information if the user is housekeeping\n\n    if (this.state.role === 'housekeeping') {\n      axios({\n        method: 'post',\n        url: 'http://localhost:8082/housekeeping/request/getRequest',\n        data: {\n          id: this.state.id\n        }\n      }).then(res => {\n        console.log(\"Got\");\n\n        if (res.data.status === 'success') {\n          console.log(\"Got inside\");\n          this.setState({\n            requestPerson: res.data.request\n          });\n        } else {\n          console.log(this.state.id);\n          console.log(res.data);\n        }\n      }).catch(err => {\n        console.log('Error fetching request person:', err);\n      });\n    }\n  }\n\n  render() {\n    const servants = this.state.servants;\n    const role = this.state.role;\n    const id = this.state.id;\n    const requestPerson = this.state.requestPerson;\n    let servList;\n\n    if (servants.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"textz\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Sorry, all staffs are occupied!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this);\n    } else {\n      servList = servants.map((serv, k) => /*#__PURE__*/_jsxDEV(HousekeepingCard, {\n        servants: serv,\n        role: role,\n        id: id\n      }, k, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this));\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"label label-danger\",\n      style: {\n        margin: 'auto',\n        marginTop: '100px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-12\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"display-4 text-center\",\n              children: \"Availability Ledger\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"list\",\n          style: {\n            margin: 'auto'\n          },\n          children: servList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), role === 'housekeeping' && requestPerson && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"request-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"request-title\",\n            children: \"Request\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"request-person\",\n            children: requestPerson\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 3\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cross-mark\",\n            onMouseEnter: e => e.currentTarget.classList.add('hovered'),\n            onMouseLeave: e => e.currentTarget.classList.remove('hovered'),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 3\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass RequestHousekeeping extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {\n        sid: this.props.match.params.sid,\n        uid: this.props.id\n      }\n    };\n  }\n\n  submitHandler(event) {\n    event.preventDefault();\n    axios({\n      method: 'post',\n      url: 'housekeeping/request/confirm',\n      baseURL: 'http://localhost:8082/',\n      data: {\n        servant: this.state.data\n      }\n    });\n    alert('Successfully requested');\n    this.render();\n    console.log(\"submitted\");\n  }\n\n  render() {\n    const backbtn = () => {\n      window.location.replace('/dashboard/housekeeping');\n    };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"center\", {\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"The Housekeeping staff will be at your doorsteps soon...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          float: 'left',\n          fontSize: '18px',\n          marginLeft: '10%'\n        },\n        variant: \"warning\",\n        onClick: backbtn,\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"\\u2190 Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 111\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.submitHandler.bind(this),\n          variant: \"primary\",\n          children: \"Confirm Request\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 105\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"image1\",\n          src: \"https://media.istockphoto.com/vectors/cleaning-service-staff-smiling-cartoon-characters-isolated-on-white-vector-id958689426?k=6&m=958689426&s=612x612&w=0&h=KW24AVt3IX-yDa3LflcocU82Hn814BMU5W3AcbUV8us=\",\n          height: \"500px\",\n          width: \"500px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport { Housekeeping, RequestHousekeeping };","map":{"version":3,"sources":["C:/Users/Danusshkumar/Desktop/TAC/Apartment-Management-System/frontend/src/components/Housekeeping.js"],"names":["React","Component","axios","Button","HousekeepingCard","Header","Housekeeping","constructor","props","user","JSON","parse","localStorage","getItem","console","log","state","servants","role","id","userid","requestPerson","componentDidMount","method","url","data","then","res","setState","catch","err","status","request","render","servList","length","map","serv","k","margin","marginTop","e","currentTarget","classList","add","remove","RequestHousekeeping","sid","match","params","uid","submitHandler","event","preventDefault","baseURL","servant","alert","backbtn","window","location","replace","float","fontSize","marginLeft","bind"],"mappings":"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","sourcesContent":["import React,{Component} from 'react'\r\nimport axios from 'axios';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {HousekeepingCard} from './Cards.js'\r\nimport Header from './Header';\r\nimport './show.css'\r\n\r\n// class Housekeeping extends Component {\r\n//   constructor(props) {\r\n//     super(props);\r\n//     this.state = {\r\n//       servants: [],\r\n//       role:props.role,\r\n//       id:props.id\r\n//     };\r\n//   }\r\n\r\n// componentDidMount() {\r\n// axios({\r\n//   method: 'post',\r\n//   url: 'dashboard/housekeeping',\r\n//   baseURL: 'http://localhost:8082/',\r\n//   data:{\r\n//     role:this.props.role,\r\n//     id:this.props.id\r\n//   }\r\n\r\n// }).then(res => {\r\n//   this.setState({\r\n//     servants: res.data\r\n//   })\r\n//   })\r\n//   .catch(err =>{\r\n//   console.log('Error from Housekeeping.js');\r\n//   });\r\n\r\n\r\n// }\r\n// render() {\r\n//   const servants = this.state.servants;\r\n//   const role=this.state.role;\r\n//   const id=this.state.id;\r\n//   let servList;\r\n\r\n//   if(servants.length===0) {\r\n//     return(\r\n//     <div className=\"textz\">  <h1 >Sorry all staffs are occupied..!</h1></div>\r\n//     )\r\n//   } else {\r\n//     servList = servants.map((serv, k) =>\r\n//       <HousekeepingCard servants={serv} role={role} key={k} id={id} />\r\n//     );\r\n\r\n//   }\r\n//   if(servants==='undefined'){\r\n//     return(\r\n//       <h1>You have no one available now</h1>\r\n//     )\r\n//   }\r\n\r\n//   return (\r\n\r\n//     <div className=\"label label-danger\" style ={{margin: 'auto',marginTop : '100px'}}>\r\n//       <div className=\"container\">\r\n//         <div className=\"row\">\r\n//           <div className=\"col-md-12\">\r\n//             <h2 className=\"display-4 text-center\" >Availability Ledger</h2>\r\n//           </div>\r\n//         <div className=\"list \" style={{margin :\"auto\"}}>\r\n//               {servList}\r\n//         </div>\r\n//         <div>\r\n\r\n//         </div>\r\n\r\n//       </div>\r\n//     </div>\r\n//    </div>\r\n//   );\r\n// }\r\n// }\r\n\r\nclass Housekeeping extends Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    let user = JSON.parse(localStorage.getItem('user'));\r\n    console.log(user);\r\n    this.state = {\r\n      servants: [],\r\n      role: user.user.role,\r\n      id: user.user.userid,\r\n      requestPerson: '',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios({\r\n      method: 'post',\r\n      url: 'http://localhost:8082/dashboard/housekeeping',\r\n      data: {\r\n        role: this.state.role,\r\n        id: this.state.id,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        this.setState({ servants: res.data });\r\n      })\r\n      .catch((err) => {\r\n        console.log('Error from Housekeeping.js:', err);\r\n      });\r\n  \r\n    // Retrieve request person information if the user is housekeeping\r\n    if (this.state.role === 'housekeeping') {\r\n      axios({\r\n        method: 'post',\r\n        url: 'http://localhost:8082/housekeeping/request/getRequest',\r\n        data: { id: this.state.id },\r\n      })\r\n        .then((res) => {\r\n          console.log(\"Got\");\r\n          if (res.data.status === 'success') {\r\n            console.log(\"Got inside\");\r\n            this.setState({ requestPerson: res.data.request });\r\n          }\r\n          else {\r\n            console.log(this.state.id);\r\n            console.log(res.data);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log('Error fetching request person:', err);\r\n        });\r\n    }\r\n  }\r\n  \r\n\r\n  render() {\r\n    const servants = this.state.servants;\r\n    const role = this.state.role;\r\n    const id = this.state.id;\r\n    const requestPerson = this.state.requestPerson;\r\n    let servList;\r\n\r\n    if (servants.length === 0) {\r\n      return (\r\n        <div className=\"textz\">\r\n          <h1>Sorry, all staffs are occupied!</h1>\r\n        </div>\r\n      );\r\n    } else {\r\n      servList = servants.map((serv, k) => (\r\n        <HousekeepingCard servants={serv} role={role} key={k} id={id} />\r\n      ));\r\n    }\r\n\r\n    return (\r\n      <div className=\"label label-danger\" style={{ margin: 'auto', marginTop: '100px' }}>\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <h2 className=\"display-4 text-center\">Availability Ledger</h2>\r\n            </div>\r\n          </div>\r\n          <div className=\"list\" style={{ margin: 'auto' }}>\r\n            {servList}\r\n          </div>\r\n\r\n          {role === 'housekeeping' && requestPerson && (\r\n            <div className=\"request-container\">\r\n  <h2 className=\"request-title\">Request</h2>\r\n  <p className=\"request-person\">{requestPerson}</p>\r\n\r\n  {/* Cross Mark */}\r\n  <div className=\"cross-mark\" onMouseEnter={(e) => e.currentTarget.classList.add('hovered')}\r\n       onMouseLeave={(e) => e.currentTarget.classList.remove('hovered')}>\r\n    &times;\r\n  </div>\r\n</div>\r\n\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass RequestHousekeeping extends Component{\r\n  constructor(props){\r\n    super(props);\r\n\r\n  this.state={\r\n    data:{\r\n\r\n      sid:this.props.match.params.sid,\r\n      uid:this.props.id\r\n\r\n    }\r\n  }\r\n\r\n  }\r\n  submitHandler(event){\r\n\r\n  event.preventDefault();\r\n\r\n\r\n    axios({\r\n      method: 'post',\r\n      url: 'housekeeping/request/confirm',\r\n      baseURL: 'http://localhost:8082/',\r\n      data:{\r\n        servant:this.state.data\r\n      }\r\n\r\n    })\r\n    alert('Successfully requested');\r\n    this.render();\r\n    console.log(\"submitted\");\r\n  }\r\n\r\n  render(){\r\n    const backbtn = ()=>{\r\n      window.location.replace('/dashboard/housekeeping')\r\n    }\r\n    return(\r\n      <div >\r\n      <center><h2>The Housekeeping staff will be at your doorsteps soon...</h2></center>\r\n      <br/>\r\n      <Button style={{ float:'left', fontSize:'18px',marginLeft : '10%'}} variant=\"warning\" onClick={backbtn}><b>&larr; Back</b></Button>\r\n      <br/><br/><br/>\r\n      <center><Button onClick={this.submitHandler.bind(this)} variant=\"primary\">Confirm Request</Button><br/>\r\n      <img alt='image1'src=\"https://media.istockphoto.com/vectors/cleaning-service-staff-smiling-cartoon-characters-isolated-on-white-vector-id958689426?k=6&m=958689426&s=612x612&w=0&h=KW24AVt3IX-yDa3LflcocU82Hn814BMU5W3AcbUV8us=\" height='500px' width='500px'/>\r\n      <br/><br/></center>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport { Housekeeping,RequestHousekeeping};"]},"metadata":{},"sourceType":"module"}